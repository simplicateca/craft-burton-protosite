{## _burton/container.twig
{---------------------------------------------------------------------------##}
{%- extends "_burton/base/partial" -%}


{##---------------------------------------------------------------------------}
{§§ 1.0 ➜ Partial Templates ------------------------------------------------##}

{## [Partial] Base Template
{---------------------------------------------------------------------------##}
{%- block output _self.tagOrRaw( content ?? null, tag ?? null, attr ?? {} ) -%}



{## --------------------------------------------------------------------------}
{§§ 2.0 ➜ Layout Partials --------------------------------------------------##}

{## Container
{---------------------------------------------------------------------------##}
{%- macro container( content = null, container = null ) -%}
    {%- set params = {
        attr : {
            data: { container: container ?? null }
        },
        container: container ?? "container",
        template  : varargs.template ?? _self,
    } | merge( varargs, true ) -%}

    {%- set defs = ( block( "defs", params.template ) | jsonc_decode ) -%}

    {%- for option in params.container is iterable ? params.container : [params.container] -%}
        {%- if not match ?? null -%}
            {%- set option = option is string ? option|replace({ "container_" : "" }) -%}
            {%- set match  = defs["container_#{option}"] ?? defs[option] ?? null -%}
            {%- set params = match ? match | merge(params, true) : params -%}
        {%- endif -%}
    {%- endfor -%}

    {%- set content = include( params.template, { content: content, ...params }, withContext = false ) -%}
    {%- if params.parent ?? null -%}
        {{ _self.container( content, params.parent, template: params.template ) }}
    {%- else -%}
        {{ content }}
    {%- endif -%}
{%- endmacro -%}



{## --------------------------------------------------------------------------}
{§§ 4.0 ➜ Layout Config ----------------------------------------------------##}

{## [Config] Layout Partials (JSONC)
{---------------------------------------------------------------------------##}
{%- block defs -%}
{
    "container" : {
        "tag": "div",
        "attr": { "style": "max-width:1200px; padding: 0 1rem; margin: 0 auto;" }
    },

    "container_relative" : {
        "tag": "div",
        "attr": { "style": "position: relative;" }
    },

    "container_none" : {
        "tag": ""
    }
}
{%- endblock -%}
